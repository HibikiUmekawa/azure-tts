<speak version="1.0" xml:lang="ja-JP">
    <voice name="ja-JP-NanamiNeural">
  
    こんにちは。  
    今回の授業から、いよいよ「ゲームらしい動き」を作っていきます。  
  
    テーマは、「落ちてくる物をキャッチするゲーム」です。  
    プレイヤーを動かして、空から落ちてくるアイテムを取ることで得点を上げる、  
    とても基本的で楽しいゲームの仕組みを学びます。  
  
    <break time="1s"/>
  
    まず、この授業のゴールを確認しておきましょう。  
  
    一つ目は、「落下物が一定間隔で上から落ちてくること」。  
    二つ目は、「プレイヤーが左右に動けること」。  
    そして三つ目は、「落ちてきた物がプレイヤーに当たると、キャッチできること」。  
  
    この3つができれば、もう立派なミニゲームの完成です。  
  
    <break time="2s"/>
  
    では、まず最初のステップ。  
    ゲームの画面を作って、プレイヤーを表示しましょう。  
  
    前回の復習もかねて、基本構造は次のようになります。  
    Pyxelでゲームを作るときは、  
    「初期化」「更新」「描画」「実行」の4つの流れで構成されていましたね。  
  
    つまり、  
    pyxel.initで画面を作り、  
    update関数で動きを制御し、  
    draw関数で見た目を描き、  
    最後にpyxel.runでゲームを動かす、という流れです。  
  
    <break time="3s"/>
  
    今回はここに、プレイヤーの情報を追加します。  
    たとえば、プレイヤーの横位置をplayer_x、縦位置をplayer_yとして変数で管理します。  
    プレイヤーの形は、まずは単純な四角形でOKです。  
  
    pyxel.rectという命令を使って、  
    たとえば画面の下の方に小さな長方形を描いてみましょう。  
  
    <break time="3s"/>
  
    では、ここで実際に手を動かしてみましょう。  
    メインドットパイを開いて、  
    draw関数の中にプレイヤーを描くコードを追加してください。  
    背景をpyxel.clsで塗りつぶしたあとに、  
    pyxel.rectでプレイヤーを描画します。  
    形や色は自由です。  
    たとえば、横幅20、高さ4、色は10（黄色）にしてみるのもおすすめです。  
    <break time="6s"/>
  
    実行してみると、画面の下にプレイヤーが表示されているはずです。  
    まだ動きませんが、これがあなたの操作するキャラクターです。  
  
    <break time="2s"/>
  
    次に、プレイヤーを左右に動かせるようにします。  
    Pyxelでは、キー入力を取得するために pyxel.btn という命令を使います。  
    右矢印キーが押されているときは player_x をプラス方向に、  
    左矢印キーが押されているときはマイナス方向に動かします。  
  
    たとえば、  
    「もし右キーが押されていたら、player_x に2を足す」  
    「もし左キーが押されていたら、player_x から2を引く」  
    というように書きます。  
  
    <break time="3s"/>
  
    ここで再び実践です。  
    update関数の中に、左右キーの処理を追加してください。  
    player_x の値が変わると、次のフレームで draw関数が呼ばれ、  
    プレイヤーが新しい位置に描かれます。  
    実行してみると、キーボードの矢印キーでプレイヤーが左右に動くようになります。  
    <break time="6s"/>
  
    このとき、画面の外に出てしまうことがあります。  
    それを防ぐためには、player_x が0より小さくならないように、  
    そして画面の右端より大きくならないように制限をかけます。  
  
    たとえば、maxとminを使って、  
    player_x = max(0, min(player_x, 160))  
    のように書くと、範囲を0から160に固定できます。  
  
    <break time="3s"/>
  
    ここまでできたら、プレイヤーの基本操作は完成です。  
    自分の動きに合わせて画面上の長方形が動くのを確認してください。  
  
    <break time="2s"/>
  
    次の動画では、空から「落ちてくる物」を作っていきます。  
    一定の間隔でアイテムが出現して、プレイヤーがそれをキャッチできるようにします。  
    だんだんゲームらしくなっていきますよ。  
  
    </voice>
  </speak>
  